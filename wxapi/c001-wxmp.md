[//]:微信公众号

微信公众号可以为微信用户提供资讯和服务，而提供服务需要众平台开发接口的支持。

### 一、公众号服务基本介绍

#### 1、约定规则：

- a、一个用户关注一个公众号，会生成一个唯一的OpenID。
- b、一个用户对于同一开放平台账号下的多个公众号和应用，只有一个UnionID。可以通过UnionID获得用户基本信息。
- c、可以申请测试开发公众号，绝大部分接口都开放调用，不用先认证一个实名的公众号。
- d、有接口的调用需要先获取access_token,access_token在2小时内有效，过期需要重新获取。
- e、公众号主要通过公众号消息会话和公众号内网页来为用户提供服务

#### 2、公众号消息

- a、群发消息：订阅号为每天1次，服务号为每月4次，向用户群发消息(多媒体)。
- b、被动回复消息：用户给公众号发消息，微信将消息转发给运营者后端服务器，再有后端服务器根据应用规则进行回复。
- c、客服消息：
- d、模板消息：类似短信消息，需要预设消息模板。

#### 3、公众号内网页

许多复杂的业务场景，需要通过网页形式来提供服务。

在公众号内网页，可以：

- a、通过网页授权获取用户基本信息,可以获取用户的基本信息(获取用户的OpenID是无需用户同意的，获取用户的基本信息则需用户同意)。

- b、通过微信JS-SDK使用微信原生功能，可以实现网页录制和播放微信语音、监听微信分享、上传手机本地图片、拍照等许多能力。

#### 4、公众号、服务号功能区别

- a、都具有的重要功能：
		接收消息、被动回复消息、客服接口、群发接口、一次性订阅消息接口、用户分组、用户备注、用户基本信息、用户列表、自定义菜单、素材管理、
		发票接口、卡券接口、微信JS-SDK-分享接口、图像接口、音频接口、网页语音识别、设备信息、地理位置、界面操作、微信扫一扫

- b、服务号能，而公众号不能的功能：
		模板消息、用户地理位置、生成带参数二维码、长链接转短链接口、网页授权获取用户openid/用户基本信息、
		语义理解接口、获取多客服消息记录、客服管理、支付、小店、设备功能
- c、需要申请才能开通的功能：
		微信设备功能接口、微信卡券接口、微信小店接口、微信支付接口
		
<font color='red'>企业号，就是现在的企业微信</font>

		企业号是微信为企业客户提供的移动应用入口。它帮助企业建立员工、上下游供应链与企业IT系统间的连接。
		利用企业号，企业或第三方合作伙伴可以帮助企业快速、低成本的实现高质量的移动轻应用，实现生产、管理、协作、运营的移动化。
		通过企业号的管理页面，导入通讯录、配置应用、邀请成员关注该企业号，也可以通过应用向成员发送文本、图文、文件、视频、音频等多媒体消息。
		通过简单的配置，你就可以自动回复成员发送的消息，实现公告通知、知识管理、企业文化建设、手机企业通讯录等基本的企业应用。


### 二、注册并设置公众号

首先要注册公众号，其次在公众号的开发->基本设置页面，获得appId,完成AppSecret设置,开通IP白名单。

### 三、获取access_token

access_token是公众号的全局唯一接口调用凭据,access_token的有效期目前为2个小时，需定时刷新，重复获取将导致上次获取的access_token失效。

access_token调用的风险管理，通过用户管理员，开发者进行调用时，管理员收到公众号确认消息，通过确定才开成功获取。

### 四、申请公众测试号

点击 [申请链接](https://mp.weixin.qq.com/debug/cgi-bin/sandbox?t=sandbox/login) 扫码确认后，即可开通公众号所有接口的调用权限。


### 五、接口——菜单

创建菜单、查询菜单、删除菜单。

点击菜单的个性化推送，个性化菜单-即不同的用户群可以看到不同的功能菜单


